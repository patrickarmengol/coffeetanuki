{{define "title"}}Roasters{{end}}

{{define "main"}}
{{if .Roasters}}
<section class='section'>
    <div class='container'>
        <div id='htmx-error' hidden></div>

        <h3>
            Search Roasters
            <span class="htmx-indicator">Searching...</span>
        </h3>

        <form class='form'
            hx-get='/roasters/search'
            hx-trigger='input delay:500ms'
            hx-target='#search-results'
            hx-indicator='.htmx-indicator'>
        

            <input class='form-control' type='search' name='term'
                placeholder='begin typing to search roasters...' value='{{.SearchQuery.Term}}'>
            <input class='form-control' type='text' name='sort' value='{{.SearchQuery.Sort}}'>
        </form>

        <table class='table is-fullwidth is-hoverable'>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Website</th>
                    <th>Location</th>
                    <th>ID</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id='search-results' hx-confirm='Are you sure?' hx-target='closest tr' hx-swap='outerHTML'>
                {{template "roasterresults" .}}
            </tbody>
        </table>
    </div>
</section>
{{else}}
<p>There's nothing to see here...</p>
{{end}}
{{end}}
